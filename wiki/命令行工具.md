# 命令行工具

PyWxDump 提供了完整的命令行界面（CLI）工具。

## 基本用法

```bash
wxdump [模式] [参数]
```

查看帮助：
```bash
wxdump -h
wxdump [模式] -h
```

查看版本：
```bash
wxdump -V
```

## 命令列表

| 命令 | 说明 |
|------|------|
| `bias` | 获取微信基址偏移 |
| `info` | 获取微信账号信息 |
| `wx_path` | 获取微信文件夹路径 |
| `decrypt` | 解密微信数据库 |
| `merge` | 合并微信数据库 |
| `dbshow` | 查看聊天记录 |
| `ui` | 启动 Web 图形界面 |
| `api` | 启动 API 服务 |

---

## bias - 获取基址偏移

用于获取微信内存中的基址偏移量，通常用于支持新版本微信。

```bash
wxdump bias --mobile <手机号> --name <昵称> --account <账号> [选项]
```

### 参数

| 参数 | 必填 | 说明 |
|------|------|------|
| `--mobile` | 是 | 微信绑定的手机号 |
| `--name` | 是 | 微信昵称 |
| `--account` | 是 | 微信账号 |
| `--key` | 否 | 已知的密钥 |
| `--db_path` | 否 | 微信文件夹路径 |
| `-vlp` | 否 | 版本偏移文件路径 |

### 示例

```bash
wxdump bias --mobile "13800138000" --name "昵称" --account "wxid_xxx"
```

---

## info - 获取微信信息

获取当前登录微信的账号信息，包括密钥。

```bash
wxdump info [选项]
```

### 参数

| 参数 | 说明 |
|------|------|
| `-vlp` | 微信版本偏移文件路径 |
| `-s` | 保存路径（JSON 文件） |

### 示例

```bash
# 基本使用
wxdump info

# 保存到文件
wxdump info -s "C:\wx_info.json"
```

### 输出信息

| 字段 | 说明 |
|------|------|
| `pid` | 微信进程 ID |
| `version` | 微信版本号 |
| `account` | 微信账号 |
| `mobile` | 手机号 |
| `nickname` | 昵称 |
| `mail` | 邮箱 |
| `wxid` | 微信原始 ID |
| `key` | 数据库密钥（64位十六进制） |
| `wx_dir` | 微信文件夹路径 |

---

## wx_path - 获取数据库路径

获取微信数据库文件的路径。

```bash
wxdump wx_path [选项]
```

### 参数

| 参数 | 说明 |
|------|------|
| `-r` | 需要的数据库名称，多个用分号分隔 |
| `-wf` | WeChat Files 路径 |
| `-id` | wxid，用于确认用户文件夹 |

### 示例

```bash
# 获取所有数据库
wxdump wx_path

# 获取指定类型数据库
wxdump wx_path -r "MSG;MicroMsg;MediaMSG"
```

---

## decrypt - 解密数据库

使用密钥解密微信数据库。

```bash
wxdump decrypt -k <密钥> -i <数据库路径> [-o <输出路径>]
```

### 参数

| 参数 | 必填 | 说明 |
|------|------|------|
| `-k` | 是 | 64位十六进制密钥 |
| `-i` | 是 | 数据库路径（目录或文件） |
| `-o` | 否 | 输出路径，默认为当前目录下 `decrypted` 文件夹 |

### 示例

```bash
# 解密单个文件
wxdump decrypt -k "密钥" -i "C:\...\MSG\MSG0.db" -o "C:\output"

# 解密整个目录
wxdump decrypt -k "密钥" -i "C:\...\MSG" -o "C:\output"
```

---

## merge - 合并数据库

合并多个微信数据库文件（MSG.db 或 MediaMSG.db）。

```bash
wxdump merge -i <数据库路径> [-o <输出路径>]
```

### 参数

| 参数 | 必填 | 说明 |
|------|------|------|
| `-i` | 是 | 数据库文件路径，多个用英文逗号分隔 |
| `-o` | 否 | 输出路径 |

### 示例

```bash
wxdump merge -i "MSG0.db,MSG1.db,MSG2.db" -o "C:\output\merge.db"
```

---

## dbshow - 查看聊天记录

通过 Web 界面查看聊天记录。

```bash
wxdump dbshow -merge <合并数据库路径> [选项]
```

### 参数

| 参数 | 说明 |
|------|------|
| `-merge` | 合并后的 merge_all.db 路径 |
| `-wid` | 微信文件夹路径（用于显示图片） |
| `-myid` | 本人微信 ID |
| `--online` | 允许局域网访问 |

### 示例

```bash
wxdump dbshow -merge "C:\output\merge_all.db" -wid "C:\WeChat Files\wxid_xxx"
```

---

## ui - 启动 Web 界面

启动图形化 Web 界面。

```bash
wxdump ui [选项]
```

### 参数

| 参数 | 说明 | 默认值 |
|------|------|--------|
| `-p` | 端口号 | 5000 |
| `--online` | 允许局域网访问 | 否 |
| `--debug` | 开启调试模式 | 否 |
| `--noOpenBrowser` | 禁止自动打开浏览器 | 否 |

### 示例

```bash
# 默认启动
wxdump ui

# 指定端口，允许局域网访问
wxdump ui -p 8080 --online
```

---

## api - 启动 API 服务

启动 REST API 服务，不打开浏览器。

```bash
wxdump api [选项]
```

### 参数

| 参数 | 说明 | 默认值 |
|------|------|--------|
| `-p` | 端口号 | 5000 |
| `--online` | 允许局域网访问 | 否 |
| `--debug` | 开启调试模式 | 否 |

### 示例

```bash
# 启动 API 服务
wxdump api

# 指定端口
wxdump api -p 8080 --online
```

API 文档访问：`http://127.0.0.1:5000/docs`

---

## 已废弃命令

| 命令 | 说明 | 替代方案 |
|------|------|----------|
| `all` | 一键获取信息并解密 | 使用 `ui` 命令 |
| `export` | 导出聊天记录 | 使用 `ui` 或 `api` 命令 |

---

[返回首页](Home.md) | [上一步：快速开始](快速开始.md) | [下一步：Python API](Python-API.md)
